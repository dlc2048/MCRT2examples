# Example of point isotropic sources, with different energy distribution
# from the MCNP PRIMER 3.3.1, last example
# 
# geometry build is required before run this code.
# builder command
# > RT2builder -i world.inp
#
# MC run command
# > RT2mc -i mc.inp -o mc.out
# 
# The scoring results can be plotted by Python script.
# Python run command
# > python3 plot.py  [Linux]
# > python  plot.py  [Windows]
#
# Attached image file (flux.png) is the flux map for checking the shape of source
# Attacted image file (spect.png) is the spectrum of source, boundary crossing from
# world to void


CUDA_SETTINGS block_per_sm=128 gpu=0

# histogram for p1
ENTRY ebin1  .1   .3   .5   1.   2.5   # bins
ENTRY eprob1 .2   .4   .3   .1         # probability

# discrete for p2
ENTRY ebin2  .3   .5   .9   1.25       # peak
ENTRY eprob2 .2   .1   .3   .4

ENTRY dbin  -1   1   # isotropic
ENTRY dprob 1

# disable neutron/ion transport
NEUTRON        activate=0  
NEUTRON_HIGH   activate=0
GENERIC_ION    activate=0

COMPOUND vacuum     0.0

ASSIGN region=world compound=vacuum
ASSIGN region=void  compound=vacuum

BEAM_GLOBAL mode=macro nps=1e9

BEAM_SPHERE   name=p1               \
              pid=0                 \  # photon
              position=-10,0,0      \
              radius=0,0            \  # point source
              type=linear           \
              weight=0.4            \  # 40% intensity
              direction=0,0,1       \
              energy=ebin1,eprob1   \
              divergence=dbin,dprob
              

BEAM_SPHERE   name=p2               \
              pid=0                 \  # photon
              position=+10,0,0      \
              radius=0,0            \  # point source
              type=linear           \
              weight=0.6            \  # 60% intensity
              direction=0,0,1       \
              energy=ebin2,eprob2   \
              divergence=dbin,dprob
              
                            
CROSS  name=spect  pid=0  escale=linear  erange=0,5  ne=100  from=world  to=void

MESH_TRACK  name=flux  pid=0  \
            xrange=-50,50  nx=200  \
            yrange=-50,50  ny=200  \
            zrange=-50,50  nz=200  \ 
            escale=linear  erange=0,12  ne=1